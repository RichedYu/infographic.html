<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Infographic: China's Economic Currents - A Household Perspective</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; 
            color: #334155; 
            transition: background-color 0.3s, color 0.3s;
        }
        .dark body {
            background-color: #1e293b; 
            color: #e2e8f0; 
        }
        .dark .stat-card, .dark .modal-content {
            background-color: #334155; 
            color: #e2e8f0; 
        }
        .dark .content-text, .dark .sub-title, .dark .section-title, .dark .text-slate-600, .dark .text-slate-500, .dark .text-slate-700, .dark .text-slate-800, .dark #modalTitleText {
            color: #cbd5e1; 
        }
         .dark .stat-number { color: #FF8C00; } 
         .dark .section-title { color: #5eead4; } 
         .dark .sub-title { color: #5eead4; } 
         .dark .flowchart-step { background-color: #3b82f6; color:white; } 
         .dark .flowchart-arrow { color: #5eead4; }
         /* .dark .gemini-button is handled by base .gemini-button and specific dark overrides below if needed */
         .dark .learn-more-button { background-color: #FFD700; color: #422000;}
         .dark .learn-more-button:hover { background-color: #e6c200; }
         .dark .border-slate-300 { border-color: #475569; } 
         .dark select { background-color: #334155; color: #e2e8f0; border-color: #475569;}
         .dark .bg-pink-50 { background-color: #500724; } 
         .dark .border-pink-200 { border-color: #831843; } 
         .dark .modal-close { color: #9ca3af; }
         .dark .modal-close:hover { color: #e2e8f0; }
         .dark .bg-teal-50 { background-color: #042f2e; } 
         .dark .border-teal-200 { border-color: #0d9488; }


        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .stat-card {
            border-radius: 0.5rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); 
            padding: 1.5rem; 
            margin-bottom: 1.5rem; 
        }
        .stat-number {
            font-size: 3rem; 
            font-weight: 700; 
        }
        .section-title {
            font-size: 1.875rem; 
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
        }
        .sub-title {
            font-size: 1.25rem; 
            font-weight: 600;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        .content-text {
            font-size: 1rem; 
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        .flowchart-step {
            padding: 0.75rem 1rem;
            border-radius: 0.375rem; 
            text-align: center;
            font-weight: 600;
            margin-bottom: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .flowchart-arrow {
            text-align: center;
            font-size: 1.5rem; 
            margin: 0.25rem 0;
        }
        .gemini-button {
            background-color: #FF69B4; /* Energetic Pink */
            color: #3A001E; /* Dark Magenta for good contrast on pink */
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; 
            font-weight: 600;
            transition: background-color 0.3s ease, color 0.3s ease;
            cursor: pointer;
            border: none;
        }
        .gemini-button:hover {
            background-color: #db4c9c; /* Darker Pink */
            color: #3A001E; /* Text color remains the same */
        }
        .dark .gemini-button {
            /* Ensures consistency, though base style is now good for dark too */
            background-color: #FF69B4;
            color: #3A001E; 
        }
        .dark .gemini-button:hover {
            background-color: #db4c9c;
            color: #3A001E;
        }

        .learn-more-button {
            background-color: #FFD700; /* Energetic Yellow */
            color: #422000; /* Dark brown for contrast */
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem; 
            font-size: 0.75rem; 
            font-weight: 600;
            margin-left: 0.5rem;
            cursor: pointer;
            border: none;
        }
        .learn-more-button:hover {
            background-color: #e6c200; /* Darker Yellow */
        }

        .modal {
            display: none; 
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }
        .modal-content {
            margin: 10% auto;
            padding: 25px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 0.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        .modal-close {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #FF69B4; /* Pink */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 5px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .control-button {
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
            border: 1px solid transparent;
        }
        .control-button.active {
            box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.06);
        }
        .control-button { background-color: #e2e8f0; color: #334155; border-color: #cbd5e1;}
        .control-button.active { background-color: #cbd5e1; }

        .dark .control-button { background-color: #475569; color: #e2e8f0; border-color: #64748b;}
        .dark .control-button.active { background-color: #64748b; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div class="fixed top-4 right-4 z-50 flex space-x-2">
        <div>
            <button id="translateButton" class="control-button">Êñá/En</button>
        </div>
        <div class="flex rounded-md shadow-sm">
            <button id="themeLight" class="control-button rounded-l-md" title="Light Mode">‚òÄÔ∏è</button>
            <button id="themeDark" class="control-button" title="Dark Mode">üåô</button>
            <button id="themeSystem" class="control-button rounded-r-md" title="System Default">üíª</button>
        </div>
    </div>

    <div class="container mx-auto p-4 md:p-8 pt-16">

        <header class="text-center mb-12">
            <h1 id="mainHeader" class="text-4xl md:text-5xl font-bold" style="color: #FF8C00;">Navigating China's Economic Currents</h1>
            <p id="subHeader" class="text-xl text-slate-600 mt-2">A Household Perspective on Financial Trends & Market Shifts</p>
        </header>

        <section class="mb-12">
            <h2 id="householdSqueezeTitle" class="section-title">The Household Squeeze</h2>
            <div class="stat-card md:col-span-2">
                <p id="householdSqueezePara1" class="content-text">Recent analyses, including insights from the "bÁ´ôÈìÅÈî§ËÄÅ‰∏≠ÁªèÊµé.txt" source, paint a picture of significant financial pressure on Chinese households. Many are actively trying to reduce their debt ("deleveraging") amidst economic uncertainties and a shifting property market. This cautious behavior is a key theme shaping current economic trends.</p>
                <div class="text-center">
                    <p id="householdDebtToIncomeTitle" class="sub-title">Perceived Household Debt-to-Income Ratio:</p>
                    <p class="stat-number">144%</p>
                    <p id="householdDebtToIncomePara" class="content-text mt-2">This striking figure, highlighted in the source material, suggests that for every 100 yuan earned, 144 yuan are owed, pushing households into an "asset-liability sheet repair mode." While the exact methodology for this specific ratio needs context, it reflects a strong sentiment of a heavy debt burden.</p>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 id="indicatorsTitle" class="section-title">Economic Indicators & Household Reactions</h2>
            <p id="indicatorsIntro" class="content-text text-center mb-6">Several key economic indicators reflect the current climate and are influencing household financial decisions. These include shifts in savings and loans, liquidity trends, and inflationary pressures.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="stat-card">
                    <h3 id="doublePlungeTitle" class="sub-title text-center">Household Finances "Double Plunge" (May 2024, as per source [1])</h3>
                    <div class="flex justify-around mt-4">
                        <div class="text-center">
                            <p id="depositsDecreasedBy" class="text-slate-600">Deposits Decreased By:</p>
                            <p class="text-3xl font-bold" style="color: #FF69B4;">1.39 Trillion RMB</p>
                        </div>
                        <div class="text-center">
                            <p id="loansShrankBy" class="text-slate-600">Loans Shrank By:</p>
                            <p class="text-3xl font-bold" style="color: #FF69B4;">&gt;500 Billion RMB</p>
                        </div>
                    </div>
                    <p id="doublePlungePara" class="content-text mt-4">This reported simultaneous drop in household deposits and loans, despite low interest rates, signals active deleveraging and cautious financial behavior.</p>
                </div>

                <div class="stat-card">
                    <h3 id="m2m1GapTitle" class="sub-title text-center">M2-M1 "Scissors Gap" (April data, as per source [1])
                        <button class="learn-more-button" onclick="showTermExplanation('M2-M1 Scissors Gap')" id="learnMoreM2M1">Learn More ‚ú®</button>
                    </h3>
                    <div class="chart-container" style="height: 250px; max-height: 250px;">
                        <canvas id="m2m1GapChart"></canvas>
                    </div>
                    <p id="m2m1GapPara" class="content-text mt-4">The M2-M1 growth gap widened to 6.5% (M2 +8.0%, M1 +1.5% YoY for April 2025 based on broader analysis), suggesting liquidity injected by the central bank may be "idling" in the financial system rather than flowing robustly into the real economy or to households and small businesses. This indicates weak transactional demand.</p>
                </div>

                <div class="stat-card md:col-span-2">
                     <h3 id="deflationaryPressuresTitle" class="sub-title text-center">Deflationary Pressures & Consumer Behavior
                        <button class="learn-more-button" onclick="showTermExplanation('CPI and Deflationary Pressures')" id="learnMoreCPI">Learn More ‚ú®</button>
                     </h3>
                    <div class="text-center">
                        <p id="cpiYoYTitle" class="sub-title">CPI YoY (April data, as per source [1]):</p>
                        <p class="stat-number" style="font-size: 2.5rem;">-0.1%</p>
                    </div>
                    <p id="deflationaryPressuresPara" class="content-text mt-2">A reported 0.1% year-on-year decline in the Consumer Price Index for April (consistent with broader analysis for April 2025) reflects deflationary pressures. This can make holding cash seem more attractive as purchasing power appears to increase, but it also signals weak demand and can lead consumers to postpone purchases, further impacting economic activity.</p>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 id="govtStrategyTitle" class="section-title">Government's Dual Strategy</h2>
            <p id="govtStrategyIntro" class="content-text text-center mb-6">The government is employing a two-pronged approach: stimulating the economy through significant spending, primarily on infrastructure, while also emphasizing fiscal discipline within official bodies.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="stat-card">
                    <h3 id="fiscalStimulusTitle" class="sub-title text-center">Fiscal Stimulus: Bond Issuance</h3>
                     <div class="text-center mt-4">
                        <p id="bondIssuanceLabel" class="text-slate-600">Govt. Bond Issuance (First 4 months of year, as per source [1]):</p>
                        <p class="text-3xl font-bold" style="color: #FF8C00;">5.3 Trillion RMB</p>
                        <p id="bondIssuanceAvg" class="text-slate-500 text-sm">(Averaging 66.5 Billion RMB per working day)</p>
                    </div>
                    <p id="fiscalStimulusPara" class="content-text mt-4">This massive bond issuance is funding extensive infrastructure projects. However, concerns are raised in the source material about the actual employment benefits and overall economic efficiency, suggesting much of it might result in temporary, low-wage jobs (e.g., repetitive road repairs) that don't significantly boost household savings or consumption.</p>
                </div>
                <div class="stat-card">
                    <h3 id="austerityTitle" class="sub-title text-center">Simultaneous Call for Austerity</h3>
                    <div class="text-center mt-4">
                        <span class="text-5xl">‚öñÔ∏è</span>
                    </div>
                    <p id="austerityPara" class="content-text mt-4">Around May 19th (as per source [1]), new regulations mandated fiscal austerity for party and government officials, urging them to "tighten their belts." This is interpreted as an effort to ensure centrally allocated funds are used for genuine economic stimulus rather than being squandered locally, and to manage rising fiscal pressures on government finances.</p>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 id="laborMarketTitle" class="section-title">Labor Market & Consumer Confidence</h2>
            <p id="laborMarketIntro" class="content-text text-center mb-6">The employment situation and overall enterprise confidence are critical factors influencing household financial well-being and spending decisions. Weakness in these areas contributes to cautious consumer behavior.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="stat-card">
                    <h3 id="flexEmploymentTitle" class="sub-title text-center">Flexible Employment Landscape</h3>
                    <div class="chart-container" style="height: 280px; max-height: 280px;">
                        <canvas id="flexibleEmploymentChart"></canvas>
                    </div>
                    <p id="flexEmploymentPara" class="content-text mt-4">The source material highlights an increasing proportion of flexible workers (15.2%), who often face declining incomes and less job security. This trend contributes to household financial anxiety.</p>
                </div>
                <div class="stat-card">
                    <h3 id="savingsConfidenceTitle" class="sub-title text-center">Household Savings & Confidence</h3>
                     <div class="text-center mt-4">
                        <p id="avgSavingsLabel" class="text-slate-600">Average Savings for 98% of Ordinary People (as per source [1]):</p>
                        <p class="text-3xl font-bold" style="color: #008080;">6,500 Yuan</p>
                    </div>
                    <p id="savingsConfidencePara" class="content-text mt-4">This figure is described as meager and often only sufficient for emergencies, reflecting low consumer confidence and limited financial buffers for a large segment of the population. Weak enterprise confidence further compounds these concerns.</p>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 id="defensiveWealthTitle" class="section-title">Shift to "Defensive Wealth Management"</h2>
            <p id="defensiveWealthIntro" class="content-text text-center mb-6">In response to economic uncertainties, household funds are reportedly shifting towards lower-risk assets and more conservative investment strategies.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="stat-card">
                    <h3 id="wmpGrowthTitleText" class="sub-title text-center">Growth in Bank Wealth Management Products (WMPs)</h3>
                    <div class="chart-container" style="height: 280px; max-height: 280px;">
                        <canvas id="wmpGrowthChart"></canvas>
                    </div>
                    <p id="wmpGrowthPara" class="content-text mt-4">Bank WMPs reportedly rose by 2.1 trillion RMB to 31.3 trillion RMB by end of May (YoY growth of 7.35%, as per source [1]), indicating a preference for these, likely lower-risk, products. Money Market Funds and Bond Repos are also cited as "new favorites."</p>
                </div>
                <div class="stat-card">
                    <h3 id="savingPreferenceTitle" class="sub-title text-center">Preference for Saving Over Borrowing</h3>
                    <div class="text-center mt-4">
                        <p id="depositLoanRatioLabel" class="text-slate-600">Household Deposit-to-Loan Ratio (First 4 months of year, as per source [1]):</p>
                        <p class="text-3xl font-bold" style="color: #FFD700; text-shadow: 1px 1px #A0522D;">15.1</p>
                    </div>
                    <p id="savingPreferencePara" class="content-text mt-4">This extraordinarily high ratio starkly contrasts with typical levels, indicating a strong preference for saving over borrowing, reinforcing the defensive stance of households.</p>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 id="investmentStrategyTitle" class="section-title">Simplified Investment Strategy Path</h2>
            <p id="investmentStrategyIntro" class="content-text text-center mb-6">Navigating personal finances in this climate requires a thoughtful approach. Here‚Äôs a simplified representation of key considerations for individuals, emphasizing caution and foundational steps.</p>
            <div class="stat-card md:col-span-2">
                <div id="flowchartStepStart" class="flowchart-step">Start: Assess Financial Situation & Goals</div>
                <div class="flowchart-arrow">‚Üì</div>
                <div id="flowchartStep1" class="flowchart-step">1. Build/Maintain Emergency Fund (3-6 months expenses in liquid, safe assets)</div>
                <div class="flowchart-arrow">‚Üì</div>
                <div id="flowchartStep2" class="flowchart-step">2. Manage High-Interest Debt (Prioritize repayment)</div>
                <div class="flowchart-arrow">‚Üì</div>
                <div id="flowchartStep3" class="flowchart-step">3. Consider Low-Risk Options (e.g., MMFs, Govt. Bonds, some WMPs after due diligence)</div>
                <div class="flowchart-arrow">‚Üì</div>
                <div class="flex flex-col sm:flex-row justify-around">
                    <div class="flex flex-col items-center w-full sm:w-auto">
                        <div id="flowchartStep4a" class="flowchart-step mt-2 sm:mt-0">4a. Medium-Risk (If aligned with risk tolerance/horizon - e.g., Balanced Funds, Corp Bonds)</div>
                    </div>
                    <div class="flowchart-arrow sm:hidden">‚Üì</div>
                     <div class="flex flex-col items-center w-full sm:w-auto">
                        <div id="flowchartStep4b" class="flowchart-step mt-2 sm:mt-0">4b. Higher-Risk (With caution, long-term view - e.g., Stocks, Equity ETFs)</div>
                    </div>
                </div>
                 <div class="flowchart-arrow">‚Üì</div>
                <div id="flowchartStepOngoing" class="flowchart-step">Ongoing: Diversify, Stay Informed, Seek Professional Advice if Needed</div>
                <p id="investmentStrategyDisclaimer" class="content-text mt-4">This is a general guide. Individual strategies must be tailored to personal circumstances, risk tolerance, and investment horizon. The current environment suggests a strong emphasis on capital preservation and cautious growth.</p>
            
                <div class="mt-8 pt-6 border-t border-slate-300">
                    <h3 id="aiPointersTitle" class="sub-title text-center">‚ú® Get AI-Powered Pointers & Risk Insights (Illustrative)</h3>
                    <p id="aiPointersIntro" class="content-text text-center text-sm text-slate-500 mb-4">Select your general preferences below for illustrative pointers and associated risk considerations. This is NOT financial advice.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="riskTolerance" id="riskToleranceLabel" class="block text-sm font-medium text-slate-700 mb-1">Risk Tolerance:</label>
                            <select id="riskTolerance" class="w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500">
                                <option id="riskLow" value="Low">Low</option>
                                <option id="riskMedium" value="Medium" selected>Medium</option>
                                <option id="riskHigh" value="High">High</option>
                            </select>
                        </div>
                        <div>
                            <label for="investmentHorizon" id="investmentHorizonLabel" class="block text-sm font-medium text-slate-700 mb-1">Investment Horizon:</label>
                            <select id="investmentHorizon" class="w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500">
                                <option id="horizonShort" value="Short-term (1-3 years)">Short-term (1-3 years)</option>
                                <option id="horizonMedium" value="Medium-term (3-7 years)" selected>Medium-term (3-7 years)</option>
                                <option id="horizonLong" value="Long-term (7+ years)">Long-term (7+ years)</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-center mb-4">
                        <button id="generatePointersButton" class="gemini-button">Generate Pointers & Risks ‚ú®</button>
                    </div>
                    <div id="geminiPointersResult" class="p-4 bg-pink-50 border border-pink-200 rounded-md min-h-[150px] content-text">
                        <span id="geminiPointersPlaceholder">Your personalized pointers and risk insights will appear here...</span>
                    </div>
                     <p id="aiDisclaimer" class="content-text text-center text-xs text-slate-400 mt-2">AI-generated content can be inaccurate or incomplete. Always do your own research and consult a financial advisor.</p>
                </div>
            </div>
        </section>
        
        <section class="mb-12">
            <h2 id="aiOutlookTitle" class="section-title">‚ú® AI Economic Outlook Summary</h2>
            <div class="stat-card md:col-span-2">
                <p id="aiOutlookIntro" class="content-text text-center mb-4">Get a concise AI-generated summary of the current economic outlook for Chinese households based on the themes presented in this infographic. This is for informational purposes only.</p>
                <div class="text-center mb-4">
                    <button id="generateOutlookButton" class="gemini-button">Get AI Outlook Summary ‚ú®</button>
                </div>
                <div id="geminiOutlookResult" class="p-4 bg-teal-50 border border-teal-200 rounded-md min-h-[100px] content-text">
                    <span id="geminiOutlookPlaceholder">The AI-generated economic outlook summary will appear here...</span>
                </div>
                <p id="aiOutlookDisclaimer" class="content-text text-center text-xs text-slate-400 mt-2">AI-generated content can be inaccurate or incomplete. Always do your own research.</p>
            </div>
        </section>

        <section class="mb-8">
            <h2 id="conclusionTitle" class="section-title">Navigating the Path Ahead</h2>
            <div class="stat-card md:col-span-2">
                <p id="conclusionPara1" class="content-text">The Chinese economy is navigating a period of adjustment, with household financial behaviors reflecting significant caution. Deleveraging, increased precautionary savings, and a shift towards defensive investments are prominent trends stemming from concerns about income stability, the property market, and broader economic uncertainties, exacerbated by deflationary pressures.</p>
                <p id="conclusionPara2" class="content-text">While government stimulus aims to invigorate growth, its direct impact on household confidence and spending remains a key area to watch. For individuals, a prudent, diversified, and informed approach to personal finance is more critical than ever. Strategies should focus on building resilience, managing debt, and aligning investments with long-term goals and risk tolerance in this evolving landscape.</p>
                <p id="conclusionPara3" class="content-text">Ultimately, fostering sustainable recovery will likely require policies that not only support aggregate growth but also directly address household income security and bolster consumer confidence, encouraging a more balanced pattern of domestic demand.</p>
            </div>
        </section>

        <footer class="text-center text-sm text-slate-500 mt-12 py-4 border-t border-slate-300">
            <p id="footerDisclaimer1">Data and insights synthesized from "Navigating China's Economic Currents: Household Finances and Investment Strategies" report, based on analysis of "bÁ´ôÈìÅÈî§ËÄÅ‰∏≠ÁªèÊµé.txt" and other economic indicators (as of May 2025 context). This infographic is for illustrative purposes. Always consult with qualified financial professionals for investment advice.</p>
            <p id="footerDisclaimer2">Chart.js and Tailwind CSS used for generation. NO SVG graphics or Mermaid JS were used. Enhanced with Gemini API features for illustrative purposes.</p>
        </footer>
    </div>

    <div id="termModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <h3 id="modalTitleText" class="sub-title text-center mb-3">Term Explanation</h3>
            <div id="modalBody" class="content-text"></div>
            <div id="modalLoading" class="loading-spinner" style="display: none;"></div>
        </div>
    </div>

    <script>
        let m2m1GapChartInstance, flexibleEmploymentChartInstance, wmpGrowthChartInstance;

        const translations = {
            en: {
                pageTitle: "Infographic: China's Economic Currents - A Household Perspective",
                mainHeader: "Navigating China's Economic Currents",
                subHeader: "A Household Perspective on Financial Trends & Market Shifts",
                householdSqueezeTitle: "The Household Squeeze",
                householdSqueezePara1: "Recent analyses, including insights from the \"bÁ´ôÈìÅÈî§ËÄÅ‰∏≠ÁªèÊµé.txt\" source, paint a picture of significant financial pressure on Chinese households. Many are actively trying to reduce their debt (\"deleveraging\") amidst economic uncertainties and a shifting property market. This cautious behavior is a key theme shaping current economic trends.",
                householdDebtToIncomeTitle: "Perceived Household Debt-to-Income Ratio:",
                householdDebtToIncomePara: "This striking figure, highlighted in the source material, suggests that for every 100 yuan earned, 144 yuan are owed, pushing households into an \"asset-liability sheet repair mode.\" While the exact methodology for this specific ratio needs context, it reflects a strong sentiment of a heavy debt burden.",
                indicatorsTitle: "Economic Indicators & Household Reactions",
                indicatorsIntro: "Several key economic indicators reflect the current climate and are influencing household financial decisions. These include shifts in savings and loans, liquidity trends, and inflationary pressures.",
                doublePlungeTitle: "Household Finances \"Double Plunge\" (May 2024, as per source [1])",
                depositsDecreasedBy: "Deposits Decreased By:",
                loansShrankBy: "Loans Shrank By:",
                doublePlungePara: "This reported simultaneous drop in household deposits and loans, despite low interest rates, signals active deleveraging and cautious financial behavior.",
                m2m1GapTitle: "M2-M1 \"Scissors Gap\" (April data, as per source [1])",
                learnMoreM2M1: "Learn More ‚ú®",
                m2m1GapPara: "The M2-M1 growth gap widened to 6.5% (M2 +8.0%, M1 +1.5% YoY for April 2025 based on broader analysis), suggesting liquidity injected by the central bank may be \"idling\" in the financial system rather than flowing robustly into the real economy or to households and small businesses. This indicates weak transactional demand.",
                deflationaryPressuresTitle: "Deflationary Pressures & Consumer Behavior",
                learnMoreCPI: "Learn More ‚ú®",
                cpiYoYTitle: "CPI YoY (April data, as per source [1]):",
                deflationaryPressuresPara: "A reported 0.1% year-on-year decline in the Consumer Price Index for April (consistent with broader analysis for April 2025) reflects deflationary pressures. This can make holding cash seem more attractive as purchasing power appears to increase, but it also signals weak demand and can lead consumers to postpone purchases, further impacting economic activity.",
                govtStrategyTitle: "Government's Dual Strategy",
                govtStrategyIntro: "The government is employing a two-pronged approach: stimulating the economy through significant spending, primarily on infrastructure, while also emphasizing fiscal discipline within official bodies.",
                fiscalStimulusTitle: "Fiscal Stimulus: Bond Issuance",
                bondIssuanceLabel: "Govt. Bond Issuance (First 4 months of year, as per source [1]):",
                bondIssuanceAvg: "(Averaging 66.5 Billion RMB per working day)",
                fiscalStimulusPara: "This massive bond issuance is funding extensive infrastructure projects. However, concerns are raised in the source material about the actual employment benefits and overall economic efficiency, suggesting much of it might result in temporary, low-wage jobs (e.g., repetitive road repairs) that don't significantly boost household savings or consumption.",
                austerityTitle: "Simultaneous Call for Austerity",
                austerityPara: "Around May 19th (as per source [1]), new regulations mandated fiscal austerity for party and government officials, urging them to \"tighten their belts.\" This is interpreted as an effort to ensure centrally allocated funds are used for genuine economic stimulus rather than being squandered locally, and to manage rising fiscal pressures on government finances.",
                laborMarketTitle: "Labor Market & Consumer Confidence",
                laborMarketIntro: "The employment situation and overall enterprise confidence are critical factors influencing household financial well-being and spending decisions. Weakness in these areas contributes to cautious consumer behavior.",
                flexEmploymentTitle: "Flexible Employment Landscape",
                flexEmploymentPara: "The source material highlights an increasing proportion of flexible workers (15.2%), who often face declining incomes and less job security. This trend contributes to household financial anxiety.",
                savingsConfidenceTitle: "Household Savings & Confidence",
                avgSavingsLabel: "Average Savings for 98% of Ordinary People (as per source [1]):",
                savingsConfidencePara: "This figure is described as meager and often only sufficient for emergencies, reflecting low consumer confidence and limited financial buffers for a large segment of the population. Weak enterprise confidence further compounds these concerns.",
                defensiveWealthTitle: "Shift to \"Defensive Wealth Management\"",
                defensiveWealthIntro: "In response to economic uncertainties, household funds are reportedly shifting towards lower-risk assets and more conservative investment strategies.",
                wmpGrowthTitleText: "Growth in Bank Wealth Management Products (WMPs)",
                wmpGrowthPara: "Bank WMPs reportedly rose by 2.1 trillion RMB to 31.3 trillion RMB by end of May (YoY growth of 7.35%, as per source [1]), indicating a preference for these, likely lower-risk, products. Money Market Funds and Bond Repos are also cited as \"new favorites.\"",
                savingPreferenceTitle: "Preference for Saving Over Borrowing",
                depositLoanRatioLabel: "Household Deposit-to-Loan Ratio (First 4 months of year, as per source [1]):",
                savingPreferencePara: "This extraordinarily high ratio starkly contrasts with typical levels, indicating a strong preference for saving over borrowing, reinforcing the defensive stance of households.",
                investmentStrategyTitle: "Simplified Investment Strategy Path",
                investmentStrategyIntro: "Navigating personal finances in this climate requires a thoughtful approach. Here‚Äôs a simplified representation of key considerations for individuals, emphasizing caution and foundational steps.",
                flowchartStepStart: "Start: Assess Financial Situation & Goals",
                flowchartStep1: "1. Build/Maintain Emergency Fund (3-6 months expenses in liquid, safe assets)",
                flowchartStep2: "2. Manage High-Interest Debt (Prioritize repayment)",
                flowchartStep3: "3. Consider Low-Risk Options (e.g., MMFs, Govt. Bonds, some WMPs after due diligence)",
                flowchartStep4a: "4a. Medium-Risk (If aligned with risk tolerance/horizon - e.g., Balanced Funds, Corp Bonds)",
                flowchartStep4b: "4b. Higher-Risk (With caution, long-term view - e.g., Stocks, Equity ETFs)",
                flowchartStepOngoing: "Ongoing: Diversify, Stay Informed, Seek Professional Advice if Needed",
                investmentStrategyDisclaimer: "This is a general guide. Individual strategies must be tailored to personal circumstances, risk tolerance, and investment horizon. The current environment suggests a strong emphasis on capital preservation and cautious growth.",
                aiPointersTitle: "‚ú® Get AI-Powered Pointers & Risk Insights (Illustrative)",
                aiPointersIntro: "Select your general preferences below for illustrative pointers and associated risk considerations. This is NOT financial advice.",
                riskToleranceLabel: "Risk Tolerance:",
                riskLow: "Low",
                riskMedium: "Medium",
                riskHigh: "High",
                investmentHorizonLabel: "Investment Horizon:",
                horizonShort: "Short-term (1-3 years)",
                horizonMedium: "Medium-term (3-7 years)",
                horizonLong: "Long-term (7+ years)",
                generatePointersButton: "Generate Pointers & Risks ‚ú®",
                geminiPointersPlaceholder: "Your personalized pointers and risk insights will appear here...",
                aiDisclaimer: "AI-generated content can be inaccurate or incomplete. Always do your own research and consult a financial advisor.",
                aiOutlookTitle: "‚ú® AI Economic Outlook Summary",
                aiOutlookIntro: "Get a concise AI-generated summary of the current economic outlook for Chinese households based on the themes presented in this infographic. This is for informational purposes only.",
                generateOutlookButton: "Get AI Outlook Summary ‚ú®",
                geminiOutlookPlaceholder: "The AI-generated economic outlook summary will appear here...",
                aiOutlookDisclaimer: "AI-generated content can be inaccurate or incomplete. Always do your own research.",
                conclusionTitle: "Navigating the Path Ahead",
                conclusionPara1: "The Chinese economy is navigating a period of adjustment, with household financial behaviors reflecting significant caution. Deleveraging, increased precautionary savings, and a shift towards defensive investments are prominent trends stemming from concerns about income stability, the property market, and broader economic uncertainties, exacerbated by deflationary pressures.",
                conclusionPara2: "While government stimulus aims to invigorate growth, its direct impact on household confidence and spending remains a key area to watch. For individuals, a prudent, diversified, and informed approach to personal finance is more critical than ever. Strategies should focus on building resilience, managing debt, and aligning investments with long-term goals and risk tolerance in this evolving landscape.",
                conclusionPara3: "Ultimately, fostering sustainable recovery will likely require policies that not only support aggregate growth but also directly address household income security and bolster consumer confidence, encouraging a more balanced pattern of domestic demand.",
                footerDisclaimer1: "Data and insights synthesized from \"Navigating China's Economic Currents: Household Finances and Investment Strategies\" report, based on analysis of \"bÁ´ôÈìÅÈî§ËÄÅ‰∏≠ÁªèÊµé.txt\" and other economic indicators (as of May 2025 context). This infographic is for illustrative purposes. Always consult with qualified financial professionals for investment advice.",
                footerDisclaimer2: "Chart.js and Tailwind CSS used for generation. NO SVG graphics or Mermaid JS were used. Enhanced with Gemini API features for illustrative purposes.",
                modalTitleText: "Term Explanation",
                modalLoadingText: "Loading explanation...",
                generatingPointersText: "Generating pointers & risks...",
                generatingOutlookText: "Generating outlook summary...",
                m2m1ChartTitleText: "M2 vs M1 Growth (YoY April)",
                m2m1LabelM2: "M2 Growth (YoY April)",
                m2m1LabelM1: "M1 Growth (YoY April)",
                m2m1YAxisLabel: "Growth Rate (%)",
                flexEmploymentChartTitleText: "Flexible Employment Proportion (15.2%)",
                flexEmploymentLabelFlexible: "Flexible Employment",
                flexEmploymentLabelOther: "Other Employment",
                wmpGrowthChartTitleText: "Growth in Bank WMPs (YoY +7.35%)",
                wmpGrowthLabelPrevious: "Previous WMP Scale (Approx.)",
                wmpGrowthLabelCurrent: "Current WMP Scale (End May)",
                wmpGrowthYAxisLabel: "Scale (Trillion RMB)",
            },
            zh: {
                pageTitle: "ÂõæË°®Ëß£ËØªÔºö‰∏≠ÂõΩÁªèÊµéÊΩÆÊµÅ‰∏ãÁöÑÂÆ∂Â∫≠ËßÜËßí",
                mainHeader: "È©æÈ©≠‰∏≠ÂõΩÁªèÊµéÊΩÆÊµÅ",
                subHeader: "ÂÆ∂Â∫≠ËßÜËßí‰∏ãÁöÑÈáëËûçË∂ãÂäø‰∏éÂ∏ÇÂú∫ÂèòÂåñ",
                householdSqueezeTitle: "ÂÆ∂Â∫≠Ë¥¢Âä°ÂéãÂäõ",
                householdSqueezePara1: "ËøëÊúüÂàÜÊûêÔºàÂåÖÊã¨Êù•Ëá™‚ÄúbÁ´ôÈìÅÈî§ËÄÅ‰∏≠ÁªèÊµé.txt‚ÄùÊù•Ê∫êÁöÑÊ¥ûÂØüÔºâÊèèÁªò‰∫Ü‰∏≠ÂõΩÂÆ∂Â∫≠Èù¢‰∏¥ÁöÑÂ∑®Â§ßË¥¢Âä°ÂéãÂäõ„ÄÇÂú®ÁªèÊµé‰∏çÁ°ÆÂÆöÊÄßÂíåÊàøÂú∞‰∫ßÂ∏ÇÂú∫ÂèòÂåñÁöÑËÉåÊôØ‰∏ãÔºåËÆ∏Â§öÂÆ∂Â∫≠Ê≠£ÁßØÊûÅÂ∞ùËØïÂáèÂ∞ëÂÄ∫Âä°Ôºà‚ÄúÂéªÊù†ÊùÜÂåñ‚ÄùÔºâ„ÄÇËøôÁßçË∞®ÊÖéË°å‰∏∫ÊòØÂΩ±ÂìçÂΩìÂâçÁªèÊµéË∂ãÂäøÁöÑ‰∏Ä‰∏™ÂÖ≥ÈîÆ‰∏ªÈ¢ò„ÄÇ",
                householdDebtToIncomeTitle: "ÊÑüÁü•Âà∞ÁöÑÂÆ∂Â∫≠ÂÄ∫Âä°Êî∂ÂÖ•ÊØîÔºö",
                householdDebtToIncomePara: "Ê∫êÊùêÊñô‰∏≠Âº∫Ë∞ÉÁöÑËøô‰∏ÄÊÉä‰∫∫Êï∞Â≠óË°®ÊòéÔºåÊØèËµöÂèñ100ÂÖÉÔºåÂ∞±Êúâ144ÂÖÉÁî®‰∫éÂÅøÂÄ∫ÔºåÂ∞ÜÂÆ∂Â∫≠Êé®Âêë‚ÄúËµÑ‰∫ßË¥üÂÄ∫Ë°®‰øÆÂ§çÊ®°Âºè‚Äù„ÄÇËôΩÁÑ∂Ê≠§ÁâπÂÆöÊØîÁéáÁöÑÁ°ÆÂàáËÆ°ÁÆóÊñπÊ≥ïÈúÄË¶ÅÂÖ∑‰ΩìËÉåÊôØÔºå‰ΩÜÂÆÉÂèçÊò†‰∫ÜÊ≤âÈáçÂÄ∫Âä°Ë¥üÊãÖÁöÑÂº∫ÁÉàÊÑüÂèó„ÄÇ",
                indicatorsTitle: "ÁªèÊµéÊåáÊ†á‰∏éÂÆ∂Â∫≠ÂèçÂ∫î",
                indicatorsIntro: "Ëã•Âπ≤ÂÖ≥ÈîÆÁªèÊµéÊåáÊ†áÂèçÊò†‰∫ÜÂΩìÂâçÁéØÂ¢ÉÔºåÂπ∂Ê≠£Âú®ÂΩ±ÂìçÂÆ∂Â∫≠ÁöÑË¥¢Âä°ÂÜ≥Á≠ñ„ÄÇËøô‰∫õÂåÖÊã¨ÂÇ®ËìÑÂíåË¥∑Ê¨æÁöÑÂèòÂåñ„ÄÅÊµÅÂä®ÊÄßË∂ãÂäø‰ª•ÂèäÈÄöË¥ßËÜ®ËÉÄÂéãÂäõ„ÄÇ",
                doublePlungeTitle: "ÂÆ∂Â∫≠Ë¥¢Âä°‚ÄúÂèåÈôç‚ÄùÔºà2024Âπ¥5ÊúàÔºåÊ†πÊçÆÊù•Ê∫ê[1]Ôºâ",
                depositsDecreasedBy: "Â≠òÊ¨æÂáèÂ∞ëÔºö",
                loansShrankBy: "Ë¥∑Ê¨æÁº©Ê∞¥Ôºö",
                doublePlungePara: "ÊçÆÊä•ÈÅìÔºåÂ∞ΩÁÆ°Âà©ÁéáËæÉ‰ΩéÔºå‰ΩÜÂÆ∂Â∫≠Â≠òÊ¨æÂíåË¥∑Ê¨æÂêåÊó∂‰∏ãÈôçÔºåËøôÊ†áÂøóÁùÄÁßØÊûÅÁöÑÂéªÊù†ÊùÜÂåñÂíåË∞®ÊÖéÁöÑË¥¢Âä°Ë°å‰∏∫„ÄÇ",
                m2m1GapTitle: "M2-M1‚ÄúÂâ™ÂàÄÂ∑Æ‚ÄùÔºà4ÊúàÊï∞ÊçÆÔºåÊ†πÊçÆÊù•Ê∫ê[1]Ôºâ",
                learnMoreM2M1: "‰∫ÜËß£Êõ¥Â§ö ‚ú®",
                m2m1GapPara: "M2-M1Â¢ûÈïøÂ∑ÆË∑ùÊâ©Â§ßËá≥6.5%ÔºàÊ†πÊçÆÊõ¥ÂπøÊ≥õÁöÑÂàÜÊûêÔºå2025Âπ¥4ÊúàM2ÂêåÊØîÂ¢ûÈïø8.0%ÔºåM1ÂêåÊØîÂ¢ûÈïø1.5%ÔºâÔºåË°®ÊòéÂ§ÆË°åÊ≥®ÂÖ•ÁöÑÊµÅÂä®ÊÄßÂèØËÉΩÂú®ÈáëËûç‰ΩìÁ≥ª‰∏≠‚ÄúÁ©∫ËΩ¨‚ÄùÔºåËÄåÊú™Á®≥ÂÅ•Âú∞ÊµÅÂÖ•ÂÆû‰ΩìÁªèÊµéÊàñÂÆ∂Â∫≠ÂíåÂ∞èÂûã‰ºÅ‰∏ö„ÄÇËøôË°®Êòé‰∫§ÊòìÈúÄÊ±ÇÁñ≤ËΩØ„ÄÇ",
                deflationaryPressuresTitle: "ÈÄöÁº©ÂéãÂäõ‰∏éÊ∂àË¥πËÄÖË°å‰∏∫",
                learnMoreCPI: "‰∫ÜËß£Êõ¥Â§ö ‚ú®",
                cpiYoYTitle: "CPIÂêåÊØîÔºà4ÊúàÊï∞ÊçÆÔºåÊ†πÊçÆÊù•Ê∫ê[1]ÔºâÔºö",
                deflationaryPressuresPara: "ÊçÆÊä•ÈÅìÔºå4Êúà‰ªΩÊ∂àË¥πËÄÖ‰ª∑Ê†ºÊåáÊï∞ÂêåÊØî‰∏ãÈôç0.1%Ôºà‰∏é2025Âπ¥4ÊúàÊõ¥ÂπøÊ≥õÁöÑÂàÜÊûê‰∏ÄËá¥ÔºâÔºåÂèçÊò†‰∫ÜÈÄöÁº©ÂéãÂäõ„ÄÇËøôÂèØËÉΩ‰ΩøÊåÅÊúâÁé∞ÈáëÁúãËµ∑Êù•Êõ¥ÂÖ∑Âê∏ÂºïÂäõÔºåÂõ†‰∏∫Ë¥≠‰π∞Âäõ‰ºº‰πéÂú®Â¢ûÂä†Ôºå‰ΩÜ‰πüË°®ÊòéÈúÄÊ±ÇÁñ≤ËΩØÔºåÂπ∂ÂèØËÉΩÂØºËá¥Ê∂àË¥πËÄÖÊé®ËøüË¥≠‰π∞ÔºåËøõ‰∏ÄÊ≠•ÂΩ±ÂìçÁªèÊµéÊ¥ªÂä®„ÄÇ",
                govtStrategyTitle: "ÊîøÂ∫úÁöÑÂèåÈáçÁ≠ñÁï•",
                govtStrategyIntro: "ÊîøÂ∫úÊ≠£Âú®ÈááÂèñÂèåÁÆ°ÈΩê‰∏ãÁöÑÊñπÊ≥ïÔºö‰∏ªË¶ÅÈÄöËøáÂü∫Á°ÄËÆæÊñΩÁöÑÂ§ßÈáèÊîØÂá∫Êù•Âà∫ÊøÄÁªèÊµéÔºåÂêåÊó∂Âº∫Ë∞ÉÂÆòÊñπÊú∫ÊûÑÂÜÖÈÉ®ÁöÑË¥¢ÊîøÁ∫™Âæã„ÄÇ",
                fiscalStimulusTitle: "Ë¥¢ÊîøÂà∫ÊøÄÔºöÂÄ∫Âà∏ÂèëË°å",
                bondIssuanceLabel: "ÊîøÂ∫úÂÄ∫Âà∏ÂèëË°åÔºàÂπ¥ÂàùÂõõ‰∏™ÊúàÔºåÊ†πÊçÆÊù•Ê∫ê[1]ÔºâÔºö",
                bondIssuanceAvg: "ÔºàÂπ≥ÂùáÊØè‰∏™Â∑•‰ΩúÊó•665‰∫ø‰∫∫Ê∞ëÂ∏ÅÔºâ",
                fiscalStimulusPara: "ËøôÁßçÂ§ßËßÑÊ®°ÁöÑÂÄ∫Âà∏ÂèëË°åÊ≠£Âú®‰∏∫ÂπøÊ≥õÁöÑÂü∫Á°ÄËÆæÊñΩÈ°πÁõÆÊèê‰æõËµÑÈáë„ÄÇÁÑ∂ËÄåÔºåÊ∫êÊùêÊñôÂØπËøô‰∫õÊîØÂá∫ÁöÑÂÆûÈôÖÂ∞±‰∏öÊïàÁõäÂíåÊï¥‰ΩìÁªèÊµéÊïàÁéáÊèêÂá∫‰∫ÜÊãÖÂøßÔºåËÆ§‰∏∫ÂÖ∂‰∏≠Â§ßÈÉ®ÂàÜÂèØËÉΩÂØºËá¥‰∏¥Êó∂ÁöÑ‰ΩéËñ™Â∑•‰ΩúÔºà‰æãÂ¶ÇÔºåÈáçÂ§çÁöÑÈÅìË∑ØÁª¥‰øÆÔºâÔºåËøô‰∫õÂ∑•‰ΩúÂπ∂‰∏çËÉΩÊòæËëóÂ¢ûÂä†ÂÆ∂Â∫≠ÂÇ®ËìÑÊàñÊ∂àË¥π„ÄÇ",
                austerityTitle: "ÂêåÊó∂Âè∑Âè¨ÂéâË°åËäÇÁ∫¶",
                austerityPara: "Â§ßÁ∫¶Âú®5Êúà19Êó•ÔºàÊ†πÊçÆÊù•Ê∫ê[1]ÔºâÔºåÊñ∞ËßÑÂÆöË¶ÅÊ±ÇÂÖöÊîøÊú∫ÂÖ≥ÂéâË°åË¥¢ÊîøËäÇÁ∫¶ÔºåÊï¶‰øÉÂÆòÂëò‚ÄúÂãíÁ¥ßË£§ËÖ∞Â∏¶‚Äù„ÄÇËøôË¢´Ëß£ËØª‰∏∫Âä™ÂäõÁ°Æ‰øù‰∏≠Â§ÆÂàÜÈÖçÁöÑËµÑÈáëÁî®‰∫éÁúüÊ≠£ÁöÑÁªèÊµéÂà∫ÊøÄÔºåËÄå‰∏çÊòØË¢´Âú∞ÊñπÊå•ÈúçÔºåÂπ∂ÁÆ°ÁêÜÊîøÂ∫úË¥¢ÊîøÊó•ÁõäÂ¢ûÈïøÁöÑË¥¢ÊîøÂéãÂäõ„ÄÇ",
                laborMarketTitle: "Âä≥Âä®ÂäõÂ∏ÇÂú∫‰∏éÊ∂àË¥πËÄÖ‰ø°ÂøÉ",
                laborMarketIntro: "Â∞±‰∏öÂΩ¢ÂäøÂíåÊï¥‰Ωì‰ºÅ‰∏ö‰ø°ÂøÉÊòØÂΩ±ÂìçÂÆ∂Â∫≠Ë¥¢Âä°Á¶èÁ•âÂíåÊîØÂá∫ÂÜ≥Á≠ñÁöÑÂÖ≥ÈîÆÂõ†Á¥†„ÄÇËøô‰∫õÈ¢ÜÂüüÁöÑÁñ≤ËΩØÂØºËá¥‰∫ÜË∞®ÊÖéÁöÑÊ∂àË¥πËÄÖË°å‰∏∫„ÄÇ",
                flexEmploymentTitle: "ÁÅµÊ¥ªÁî®Â∑•Áä∂ÂÜµ",
                flexEmploymentPara: "Ê∫êÊùêÊñôÂº∫Ë∞ÉÔºåÁÅµÊ¥ªÁî®Â∑•ÁöÑÊØî‰æãÔºà15.2%ÔºâÊ≠£Âú®Â¢ûÂä†Ôºå‰ªñ‰ª¨ÂæÄÂæÄÈù¢‰∏¥Êî∂ÂÖ•‰∏ãÈôçÂíåÂ∑•‰Ωú‰øùÈöúÂáèÂ∞ëÁöÑÈóÆÈ¢ò„ÄÇËøô‰∏ÄË∂ãÂäøÂä†Ââß‰∫ÜÂÆ∂Â∫≠ÁöÑË¥¢Âä°ÁÑ¶Ëôë„ÄÇ",
                savingsConfidenceTitle: "ÂÆ∂Â∫≠ÂÇ®ËìÑ‰∏é‰ø°ÂøÉ",
                avgSavingsLabel: "98%ÊôÆÈÄö‰∫∫ÁöÑÂπ≥ÂùáÂÇ®ËìÑÔºàÊ†πÊçÆÊù•Ê∫ê[1]ÔºâÔºö",
                savingsConfidencePara: "Ëøô‰∏ÄÊï∞Â≠óË¢´ÊèèËø∞‰∏∫ÂæÆËñÑÔºåÈÄöÂ∏∏‰ªÖÂ§üÂ∫îÊÄ•‰πãÁî®ÔºåÂèçÊò†‰∫ÜÊ∂àË¥πËÄÖ‰ø°ÂøÉ‰Ωé‰∏ã‰ª•ÂèäÂ§ßÈÉ®ÂàÜ‰∫∫Âè£Ë¥¢Âä°ÁºìÂÜ≤ÊúâÈôê„ÄÇ‰ºÅ‰∏ö‰ø°ÂøÉÁñ≤ËΩØËøõ‰∏ÄÊ≠•Âä†Ââß‰∫ÜËøô‰∫õÊãÖÂøß„ÄÇ",
                defensiveWealthTitle: "ËΩ¨Âêë‚ÄúÈò≤Âæ°ÊÄßÁêÜË¥¢‚Äù",
                defensiveWealthIntro: "‰∏∫Â∫îÂØπÁªèÊµé‰∏çÁ°ÆÂÆöÊÄßÔºåÊçÆÊä•ÈÅìÂÆ∂Â∫≠ËµÑÈáëÊ≠£ËΩ¨ÂêëÈ£éÈô©ËæÉ‰ΩéÁöÑËµÑ‰∫ßÂíåÊõ¥‰øùÂÆàÁöÑÊäïËµÑÁ≠ñÁï•„ÄÇ",
                wmpGrowthTitleText: "Èì∂Ë°åÁêÜË¥¢‰∫ßÂìÅÔºàWMPÔºâÂ¢ûÈïø",
                wmpGrowthPara: "ÊçÆÊä•ÈÅìÔºåÈì∂Ë°åÁêÜË¥¢‰∫ßÂìÅËßÑÊ®°Âú®5ÊúàÂ∫ïÂ¢ûÂä†‰∫Ü2.1‰∏á‰∫ø‰∫∫Ê∞ëÂ∏ÅÔºåËææÂà∞31.3‰∏á‰∫ø‰∫∫Ê∞ëÂ∏ÅÔºàÂêåÊØîÂ¢ûÈïø7.35%ÔºåÊ†πÊçÆÊù•Ê∫ê[1]ÔºâÔºåË°®Êòé‰∫∫‰ª¨ÂÅèÁà±Ëøô‰∫õÈ£éÈô©ÂèØËÉΩËæÉ‰ΩéÁöÑ‰∫ßÂìÅ„ÄÇË¥ßÂ∏ÅÂ∏ÇÂú∫Âü∫ÈáëÂíåÂÄ∫Âà∏ÂõûË¥≠‰πüË¢´ËÆ§‰∏∫ÊòØ‚ÄúÊñ∞ÂÆ†‚Äù„ÄÇ",
                savingPreferenceTitle: "ÂÇ®ËìÑ‰ºò‰∫éÂÄüË¥∑ÁöÑÂÅèÂ•Ω",
                depositLoanRatioLabel: "ÂÆ∂Â∫≠Â≠òË¥∑ÊØîÔºàÂπ¥ÂàùÂõõ‰∏™ÊúàÔºåÊ†πÊçÆÊù•Ê∫ê[1]ÔºâÔºö",
                savingPreferencePara: "Ëøô‰∏ÄÊûÅÈ´òÁöÑÊØîÁéá‰∏éÈÄöÂ∏∏Ê∞¥Âπ≥ÂΩ¢ÊàêÈ≤úÊòéÂØπÊØîÔºåË°®ÊòéÂº∫ÁÉàÁöÑÂÇ®ËìÑËÄåÈùûÂÄüË¥∑ÂÅèÂ•ΩÔºåÂº∫Âåñ‰∫ÜÂÆ∂Â∫≠ÁöÑÈò≤Âæ°ÂßøÊÄÅ„ÄÇ",
                investmentStrategyTitle: "ÁÆÄÂåñÊäïËµÑÁ≠ñÁï•Ë∑ØÂæÑ",
                investmentStrategyIntro: "Âú®ËøôÁßçÁéØÂ¢É‰∏ãÁÆ°ÁêÜ‰∏™‰∫∫Ë¥¢Âä°ÈúÄË¶ÅÊ∑±ÊÄùÁÜüËôëÁöÑÊñπÊ≥ï„ÄÇ‰ª•‰∏ãÊòØ‰∏™‰∫∫ÂÖ≥ÈîÆËÄÉËôëÂõ†Á¥†ÁöÑÁÆÄÂåñË°®Ëø∞ÔºåÂº∫Ë∞ÉË∞®ÊÖéÂíåÂü∫Á°ÄÊ≠•È™§„ÄÇ",
                flowchartStepStart: "ÂºÄÂßãÔºöËØÑ‰º∞Ë¥¢Âä°Áä∂ÂÜµ‰∏éÁõÆÊ†á",
                flowchartStep1: "1. Âª∫Á´ã/Áª¥ÊåÅÂ∫îÊÄ•Âü∫ÈáëÔºà3-6‰∏™ÊúàÁîüÊ¥ªË¥πÔºåÂ≠ò‰∫éÊµÅÂä®ÊÄßÂº∫ÁöÑÂÆâÂÖ®ËµÑ‰∫ßÔºâ",
                flowchartStep2: "2. ÁÆ°ÁêÜÈ´òÊÅØÂÄ∫Âä°Ôºà‰ºòÂÖàÂÅøËøòÔºâ",
                flowchartStep3: "3. ËÄÉËôë‰ΩéÈ£éÈô©ÈÄâÈ°πÔºà‰æãÂ¶ÇË¥ßÂ∏ÅÂü∫Èáë„ÄÅÊîøÂ∫úÂÄ∫Âà∏„ÄÅÁªèÂÆ°ÊÖéË∞ÉÊü•ÁöÑÈÉ®ÂàÜÁêÜË¥¢‰∫ßÂìÅÔºâ",
                flowchartStep4a: "4a. ‰∏≠Á≠âÈ£éÈô©ÔºàËã•Á¨¶ÂêàÈ£éÈô©ÊâøÂèóËÉΩÂäõ/ÊäïËµÑÊúüÈôê - ‰æãÂ¶ÇÂπ≥Ë°°Âü∫Èáë„ÄÅÂÖ¨Âè∏ÂÄ∫Âà∏Ôºâ",
                flowchartStep4b: "4b. ËæÉÈ´òÈ£éÈô©ÔºàË∞®ÊÖéÂØπÂæÖÔºåÁùÄÁúºÈïøËøú - ‰æãÂ¶ÇËÇ°Á•®„ÄÅËÇ°Á•®ETFÔºâ",
                flowchartStepOngoing: "ÊåÅÁª≠ËøõË°åÔºöÂ§öÂÖÉÂåñÊäïËµÑ„ÄÅ‰øùÊåÅ‰ø°ÊÅØÁÅµÈÄö„ÄÅÂøÖË¶ÅÊó∂ÂØªÊ±Ç‰∏ì‰∏öÂª∫ËÆÆ",
                investmentStrategyDisclaimer: "ËøôÊòØ‰∏ÄËà¨ÊÄßÊåáÂçó„ÄÇ‰∏™‰∫∫Á≠ñÁï•ÂøÖÈ°ªÊ†πÊçÆ‰∏™‰∫∫ÊÉÖÂÜµ„ÄÅÈ£éÈô©ÊâøÂèóËÉΩÂäõÂíåÊäïËµÑÊúüÈôêÈáèË∫´ÂÆöÂà∂„ÄÇÂΩìÂâçÁéØÂ¢ÉË°®ÊòéÂ∫îÈ´òÂ∫¶ÈáçËßÜËµÑÊú¨‰øùÂÄºÂíåË∞®ÊÖéÂ¢ûÈïø„ÄÇ",
                aiPointersTitle: "‚ú® Ëé∑ÂèñAIËµãËÉΩÊèêÁ§∫‰∏éÈ£éÈô©Ê¥ûÂØüÔºàËØ¥ÊòéÊÄßÔºâ",
                aiPointersIntro: "ËØ∑Âú®‰∏ãÊñπÈÄâÊã©ÊÇ®ÁöÑ‰∏ÄËà¨ÂÅèÂ•ΩÔºå‰ª•‰æøÊ†πÊçÆ‰∏äËø∞Á≠ñÁï•Ë∑ØÂæÑËé∑ÂæóËØ¥ÊòéÊÄßÊèêÁ§∫ÂèäÁõ∏ÂÖ≥È£éÈô©ËÄÉÈáè„ÄÇËøô‰∏çÊòØË¥¢Âä°Âª∫ËÆÆ„ÄÇ",
                riskToleranceLabel: "È£éÈô©ÊâøÂèóËÉΩÂäõÔºö",
                riskLow: "‰Ωé",
                riskMedium: "‰∏≠",
                riskHigh: "È´ò",
                investmentHorizonLabel: "ÊäïËµÑÊúüÈôêÔºö",
                horizonShort: "Áü≠ÊúüÔºà1-3Âπ¥Ôºâ",
                horizonMedium: "‰∏≠ÊúüÔºà3-7Âπ¥Ôºâ",
                horizonLong: "ÈïøÊúüÔºà7Âπ¥‰ª•‰∏äÔºâ",
                generatePointersButton: "ÁîüÊàêÊèêÁ§∫‰∏éÈ£éÈô© ‚ú®",
                geminiPointersPlaceholder: "ÊÇ®ÁöÑ‰∏™ÊÄßÂåñÊèêÁ§∫‰∏éÈ£éÈô©Ê¥ûÂØüÂ∞ÜÊòæÁ§∫Âú®Ê≠§Â§Ñ...",
                aiDisclaimer: "AIÁîüÊàêÁöÑÂÜÖÂÆπÂèØËÉΩ‰∏çÂáÜÁ°ÆÊàñ‰∏çÂÆåÊï¥„ÄÇËØ∑Âä°ÂøÖËá™Ë°åÁ†îÁ©∂Âπ∂Âí®ËØ¢Ë¥¢Âä°È°æÈóÆ„ÄÇ",
                aiOutlookTitle: "‚ú® AIÁªèÊµéÂâçÊôØÊëòË¶Å",
                aiOutlookIntro: "Ê†πÊçÆÊ≠§‰ø°ÊÅØÂõæË°®‰∏≠ÂëàÁé∞ÁöÑ‰∏ªÈ¢òÔºåËé∑ÂèñAIÁîüÊàêÁöÑÂÖ≥‰∫é‰∏≠ÂõΩÂÆ∂Â∫≠ÂΩìÂâçÁªèÊµéÂâçÊôØÁöÑÁÆÄÊòéÊëòË¶Å„ÄÇÊ≠§ÂÜÖÂÆπ‰ªÖ‰æõÂèÇËÄÉ„ÄÇ",
                generateOutlookButton: "Ëé∑ÂèñAIÂâçÊôØÊëòË¶Å ‚ú®",
                geminiOutlookPlaceholder: "AIÁîüÊàêÁöÑÁªèÊµéÂâçÊôØÊëòË¶ÅÂ∞ÜÊòæÁ§∫Âú®Ê≠§Â§Ñ...",
                aiOutlookDisclaimer: "AIÁîüÊàêÁöÑÂÜÖÂÆπÂèØËÉΩ‰∏çÂáÜÁ°ÆÊàñ‰∏çÂÆåÊï¥„ÄÇËØ∑Âä°ÂøÖËá™Ë°åÁ†îÁ©∂„ÄÇ",
                conclusionTitle: "Â±ïÊúõÊú™Êù•‰πãË∑Ø",
                conclusionPara1: "‰∏≠ÂõΩÁªèÊµéÊ≠£ÁªèÂéÜË∞ÉÊï¥ÊúüÔºåÂÆ∂Â∫≠Ë¥¢Âä°Ë°å‰∏∫ÂèçÊò†Âá∫ÊòæËëóÁöÑË∞®ÊÖéÊÄÅÂ∫¶„ÄÇÂéªÊù†ÊùÜÂåñ„ÄÅÂ¢ûÂä†È¢ÑÈò≤ÊÄßÂÇ®ËìÑ‰ª•ÂèäËΩ¨ÂêëÈò≤Âæ°ÊÄßÊäïËµÑÊòØ‰∏ªË¶ÅË∂ãÂäøÔºåËøô‰∫õË∂ãÂäøÊ∫ê‰∫éÂØπÊî∂ÂÖ•Á®≥ÂÆö„ÄÅÊàøÂú∞‰∫ßÂ∏ÇÂú∫ÂíåÊõ¥ÂπøÊ≥õÁªèÊµé‰∏çÁ°ÆÂÆöÊÄßÁöÑÊãÖÂøßÔºåÂπ∂Âõ†ÈÄöÁº©ÂéãÂäõËÄåÂä†Ââß„ÄÇ",
                conclusionPara2: "ËôΩÁÑ∂ÊîøÂ∫úÂà∫ÊøÄÊé™ÊñΩÊó®Âú®ÊåØÂÖ¥Â¢ûÈïøÔºå‰ΩÜÂÖ∂ÂØπÂÆ∂Â∫≠‰ø°ÂøÉÂíåÊîØÂá∫ÁöÑÁõ¥Êé•ÂΩ±Âìç‰ªçÊòØÂÄºÂæóÂÖ≥Ê≥®ÁöÑÂÖ≥ÈîÆÈ¢ÜÂüü„ÄÇÂØπ‰∏™‰∫∫ËÄåË®ÄÔºåÂÆ°ÊÖé„ÄÅÂ§öÂÖÉÂåñÂíåÊòéÊô∫ÁöÑ‰∏™‰∫∫ÁêÜË¥¢ÊñπÊ≥ïÊØî‰ª•ÂæÄ‰ªª‰ΩïÊó∂ÂÄôÈÉΩÊõ¥‰∏∫ÈáçË¶Å„ÄÇÁ≠ñÁï•Â∫î‰æßÈáç‰∫éÂª∫Á´ãÈüßÊÄß„ÄÅÁÆ°ÁêÜÂÄ∫Âä°ÔºåÂπ∂‰ΩøÊäïËµÑ‰∏éÈïøÊúüÁõÆÊ†áÂíåÈ£éÈô©ÊâøÂèóËÉΩÂäõÂú®Ëøô‰∏Ä‰∏çÊñ≠ÂèòÂåñÁöÑÁéØÂ¢É‰∏≠‰øùÊåÅ‰∏ÄËá¥„ÄÇ",
                conclusionPara3: "ÊúÄÁªàÔºå‰øÉËøõÂèØÊåÅÁª≠Â§çËãèÂèØËÉΩÈúÄË¶Å‰∏ç‰ªÖÊîØÊåÅÊÄª‰ΩìÂ¢ûÈïøÔºåËÄå‰∏îÁõ¥Êé•Ëß£ÂÜ≥ÂÆ∂Â∫≠Êî∂ÂÖ•‰øùÈöúÂíåÂ¢ûÂº∫Ê∂àË¥πËÄÖ‰ø°ÂøÉÁöÑÊîøÁ≠ñÔºå‰ªéËÄåÈºìÂä±Êõ¥Âπ≥Ë°°ÁöÑÂõΩÂÜÖÈúÄÊ±ÇÊ®°Âºè„ÄÇ",
                footerDisclaimer1: "Êï∞ÊçÆÂíåËßÅËß£ÁªºÂêàËá™„ÄäÈ©æÈ©≠‰∏≠ÂõΩÁªèÊµéÊΩÆÊµÅÔºöÂÆ∂Â∫≠Ë¥¢Âä°‰∏éÊäïËµÑÁ≠ñÁï•„ÄãÊä•ÂëäÔºåÂü∫‰∫éÂØπ‚ÄúbÁ´ôÈìÅÈî§ËÄÅ‰∏≠ÁªèÊµé.txt‚ÄùÂèäÂÖ∂‰ªñÁªèÊµéÊåáÊ†áÔºàÊà™Ëá≥2025Âπ¥5ÊúàÔºâÁöÑÂàÜÊûê„ÄÇÊ≠§‰ø°ÊÅØÂõæË°®‰ªÖ‰æõËØ¥Êòé‰πãÁî®„ÄÇÊäïËµÑÂª∫ËÆÆËØ∑Âä°ÂøÖÂí®ËØ¢ÂêàÊ†ºÁöÑÈáëËûç‰∏ì‰∏ö‰∫∫Â£´„ÄÇ",
                footerDisclaimer2: "‰ΩøÁî®Chart.jsÂíåTailwind CSSÁîüÊàê„ÄÇÊú™‰ΩøÁî®SVGÂõæÂΩ¢ÊàñMermaid JS„ÄÇÈÄöËøáGemini APIÂäüËÉΩÂ¢ûÂº∫‰ª•‰æõËØ¥Êòé„ÄÇ",
                modalTitleText: "ÊúØËØ≠Ëß£Èáä",
                modalLoadingText: "Ê≠£Âú®Âä†ËΩΩËß£Èáä...",
                generatingPointersText: "Ê≠£Âú®ÁîüÊàêÊèêÁ§∫‰∏éÈ£éÈô©...",
                generatingOutlookText: "Ê≠£Âú®ÁîüÊàêÂâçÊôØÊëòË¶Å...",
                m2m1ChartTitleText: "M2‰∏éM1ÂêåÊØîÂ¢ûÈïøÔºàÂõõÊúàÔºâ",
                m2m1LabelM2: "M2ÂêåÊØîÂ¢ûÈïøÔºàÂõõÊúàÔºâ",
                m2m1LabelM1: "M1ÂêåÊØîÂ¢ûÈïøÔºàÂõõÊúàÔºâ",
                m2m1YAxisLabel: "Â¢ûÈïøÁéá (%)",
                flexEmploymentChartTitleText: "ÁÅµÊ¥ªÁî®Â∑•Âç†ÊØî (15.2%)",
                flexEmploymentLabelFlexible: "ÁÅµÊ¥ªÁî®Â∑•",
                flexEmploymentLabelOther: "ÂÖ∂‰ªñÂ∞±‰∏ö",
                wmpGrowthChartTitleText: "Èì∂Ë°åÁêÜË¥¢‰∫ßÂìÅÂ¢ûÈïø (ÂêåÊØîÂ¢ûÈïø+7.35%)",
                wmpGrowthLabelPrevious: "ÂÖàÂâçÁêÜË¥¢ËßÑÊ®° (Â§ßÁ∫¶)",
                wmpGrowthLabelCurrent: "ÂΩìÂâçÁêÜË¥¢ËßÑÊ®° (‰∫îÊúàÂ∫ï)",
                wmpGrowthYAxisLabel: "ËßÑÊ®° (‰∏á‰∫ø‰∫∫Ê∞ëÂ∏Å)",
            }
        };
        let currentLanguage = localStorage.getItem('infographicLanguage') || 'en';
        let currentTheme = localStorage.getItem('infographicTheme') || 'system';

        const apiKey = ""; 

        function applyTranslations() {
            const lang = translations[currentLanguage];
            if (!lang) return;

            document.documentElement.lang = currentLanguage;
            Object.keys(lang).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.tagName === 'SELECT') {
                        if (element.placeholder) element.placeholder = lang[key];
                        else if (element.tagName === 'SELECT') { /* Special handling for select options if needed */ }
                        else element.value = lang[key]; 
                    } else {
                        element.innerHTML = lang[key]; 
                    }
                }
            });
            document.getElementById('translateButton').textContent = currentLanguage === 'en' ? 'Êñá' : 'En';
            
            // Update chart texts
            const chartTextColor = document.documentElement.classList.contains('dark') ? '#cbd5e1' : '#334155';
            if (m2m1GapChartInstance) {
                m2m1GapChartInstance.options.plugins.title.text = lang.m2m1ChartTitleText;
                m2m1GapChartInstance.options.plugins.title.color = chartTextColor;
                m2m1GapChartInstance.data.labels = [wrapLabel(lang.m2m1LabelM2, 16), wrapLabel(lang.m2m1LabelM1, 16)];
                m2m1GapChartInstance.options.scales.y.title.text = lang.m2m1YAxisLabel;
                m2m1GapChartInstance.options.scales.y.title.color = chartTextColor;
                m2m1GapChartInstance.options.scales.y.ticks.color = chartTextColor;
                m2m1GapChartInstance.options.scales.x.ticks.color = chartTextColor;
                m2m1GapChartInstance.update();
            }
            if (flexibleEmploymentChartInstance) {
                flexibleEmploymentChartInstance.options.plugins.title.text = lang.flexEmploymentChartTitleText;
                flexibleEmploymentChartInstance.options.plugins.title.color = chartTextColor;
                flexibleEmploymentChartInstance.data.labels = [wrapLabel(lang.flexEmploymentLabelFlexible, 16), wrapLabel(lang.flexEmploymentLabelOther, 16)];
                flexibleEmploymentChartInstance.options.plugins.legend.labels.color = chartTextColor;
                flexibleEmploymentChartInstance.update();
            }
            if (wmpGrowthChartInstance) {
                wmpGrowthChartInstance.options.plugins.title.text = lang.wmpGrowthChartTitleText;
                wmpGrowthChartInstance.options.plugins.title.color = chartTextColor;
                wmpGrowthChartInstance.data.labels = [wrapLabel(lang.wmpGrowthLabelPrevious, 16), wrapLabel(lang.wmpGrowthLabelCurrent, 16)];
                wmpGrowthChartInstance.options.scales.y.title.text = lang.wmpGrowthYAxisLabel;
                wmpGrowthChartInstance.options.scales.y.title.color = chartTextColor;
                wmpGrowthChartInstance.options.scales.y.ticks.color = chartTextColor;
                wmpGrowthChartInstance.options.scales.x.ticks.color = chartTextColor;
                wmpGrowthChartInstance.update();
            }
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'zh' : 'en';
            localStorage.setItem('infographicLanguage', currentLanguage);
            applyTranslations();
        }
        
        function applyTheme(theme) {
            localStorage.setItem('infographicTheme', theme);
            currentTheme = theme;
            const htmlEl = document.documentElement;
            if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                htmlEl.classList.add('dark');
            } else {
                htmlEl.classList.remove('dark');
            }
            updateThemeButtonStates();
            applyTranslations(); // Re-apply translations to update chart colors for theme change
        }

        function updateThemeButtonStates() {
            document.getElementById('themeLight').classList.toggle('active', currentTheme === 'light' && !document.documentElement.classList.contains('dark'));
            document.getElementById('themeDark').classList.toggle('active', currentTheme === 'dark' || (currentTheme === 'system' && document.documentElement.classList.contains('dark')));
            document.getElementById('themeSystem').classList.toggle('active', currentTheme === 'system');
        }


        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('translateButton').addEventListener('click', toggleLanguage);
            document.getElementById('themeLight').addEventListener('click', () => applyTheme('light'));
            document.getElementById('themeDark').addEventListener('click', () => applyTheme('dark'));
            document.getElementById('themeSystem').addEventListener('click', () => applyTheme('system'));
            
            const generateOutlookButton = document.getElementById('generateOutlookButton');
            if(generateOutlookButton) {
                generateOutlookButton.addEventListener('click', getAIEconomicOutlook);
            }


            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (currentTheme === 'system') {
                    applyTheme('system'); 
                }
            });
            
            createCharts(); 
            applyTheme(currentTheme); 
            // applyTranslations(); // applyTranslations is called within applyTheme now
        });

        const energeticPlayfulPalette = {
            orange: '#FF8C00',
            yellow: '#FFD700',
            teal: '#008080',
            pink: '#FF69B4',
            lightBlue: '#ADD8E6',
            darkGray: '#334155', 
            lightGray: '#cbd5e1' 
        };


        function wrapLabel(str, maxWidth) { 
            if (!str || typeof str !== 'string') return ''; // Ensure str is a string
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            let currentLine = '';
            const lines = [];
            for (const word of words) {
                if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            if (currentLine.trim().length > 0) {
                lines.push(currentLine.trim());
            }
            return lines.length > 0 ? lines : [str]; 
        }
        const tooltipTitleCallback = function(tooltipItems) { 
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
              return label.join(' ');
            } else {
              return label;
            }
        };

        function createCharts() {
            const chartTextColor = document.documentElement.classList.contains('dark') ? energeticPlayfulPalette.lightGray : energeticPlayfulPalette.darkGray;

            const m2m1Ctx = document.getElementById('m2m1GapChart').getContext('2d');
            m2m1GapChartInstance = new Chart(m2m1Ctx, {
                type: 'bar',
                data: { 
                    labels: [], // Will be populated by applyTranslations
                    datasets: [{
                        label: 'Growth Rate (%)', // This label is not directly visible due to legend:false
                        data: [8.0, 1.5], 
                        backgroundColor: [energeticPlayfulPalette.teal, energeticPlayfulPalette.lightBlue],
                        borderColor: [energeticPlayfulPalette.teal, energeticPlayfulPalette.lightBlue],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { 
                        y: { 
                            beginAtZero: true, 
                            title: { display: true, text: '', color: chartTextColor }, // Text set by translation
                            ticks: { color: chartTextColor } 
                        }, 
                        x: { 
                            grid: { display: false },
                            ticks: { color: chartTextColor } 
                        } 
                    },
                    plugins: { 
                        legend: { display: false }, 
                        title: { display: true, text: '', color: chartTextColor }, // Text set by translation
                        tooltip: { callbacks: { title: tooltipTitleCallback } } 
                    }
                }
            });

            const flexEmpCtx = document.getElementById('flexibleEmploymentChart').getContext('2d');
            flexibleEmploymentChartInstance = new Chart(flexEmpCtx, {
                type: 'doughnut',
                data: { 
                    labels: [], // Will be populated by applyTranslations
                    datasets: [{ 
                        data: [15.2, 100 - 15.2], 
                        backgroundColor: [energeticPlayfulPalette.pink, energeticPlayfulPalette.lightBlue], 
                        borderColor: ['#FFFFFF'], 
                        borderWidth: 2 
                    }] 
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { 
                        legend: { position: 'bottom', labels: { color: chartTextColor } }, 
                        title: { display: true, text: '', color: chartTextColor }, // Text set by translation
                        tooltip: { callbacks: { title: tooltipTitleCallback } } 
                    }
                }
            });

            const wmpCtx = document.getElementById('wmpGrowthChart').getContext('2d');
            wmpGrowthChartInstance = new Chart(wmpCtx, {
                type: 'bar',
                data: { 
                    labels: [], // Will be populated by applyTranslations
                    datasets: [{ 
                        label: 'Wealth Management Products (Trillion RMB)', // Not visible
                        data: [31.3 - 2.1, 31.3], 
                        backgroundColor: [energeticPlayfulPalette.yellow, energeticPlayfulPalette.orange], 
                        borderColor: [energeticPlayfulPalette.yellow, energeticPlayfulPalette.orange], 
                        borderWidth: 1 
                    }] 
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { 
                        y: { 
                            beginAtZero: false, 
                            title: { display: true, text: '', color: chartTextColor }, // Text set by translation
                            ticks: { color: chartTextColor } 
                        }, 
                        x: { 
                            grid: { display: false },
                            ticks: { color: chartTextColor }
                        } 
                    },
                    plugins: { 
                        legend: { display: false }, 
                        title: { display: true, text: '', color: chartTextColor }, // Text set by translation
                        tooltip: { callbacks: { title: tooltipTitleCallback } } 
                    }
                }
            });
        }


        const geminiPointersResultDiv = document.getElementById('geminiPointersResult');
        const generatePointersButton = document.getElementById('generatePointersButton');
        const riskToleranceSelect = document.getElementById('riskTolerance');
        const investmentHorizonSelect = document.getElementById('investmentHorizon');
        const geminiOutlookResultDiv = document.getElementById('geminiOutlookResult');


        const termModal = document.getElementById('termModal');
        const modalTitleEl = document.getElementById('modalTitleText'); 
        const modalBody = document.getElementById('modalBody');
        const modalLoading = document.getElementById('modalLoading');

        async function callGeminiAPI(prompt) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const errorData = await response.json(); console.error("Gemini API Error:", errorData);
                    return `Error: ${errorData.error?.message || response.statusText}.`;
                }
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    console.error("Unexpected Gemini API response structure:", result);
                    return "Error: Received an unexpected response from the AI.";
                }
            } catch (error) {
                console.error("Fetch error:", error);
                return "Error: Could not connect to the AI service.";
            }
        }

        if (generatePointersButton) {
            generatePointersButton.addEventListener('click', async () => {
                const risk = riskToleranceSelect.value;
                const horizon = investmentHorizonSelect.value;
                const lang = translations[currentLanguage];
                
                geminiPointersResultDiv.innerHTML = `<div class="loading-spinner"></div> <p class="text-center">${lang.generatingPointersText || 'Generating pointers & risks...'}</p>`;
                generatePointersButton.disabled = true;

                const prompt = currentLanguage === 'zh' ? 
                `ÊÇ®ÊòØ‰∏Ä‰Ωç‰πê‰∫éÂä©‰∫∫ÁöÑÂä©ÊâãÔºåÊèê‰æõËØ¥ÊòéÊÄßÁöÑÈáëËûçÊïôËÇ≤„ÄÇ
                Ê†πÊçÆÁî®Êà∑ÈÄâÊã©ÁöÑÈ£éÈô©ÊâøÂèóËÉΩÂäõ‰∏∫‚Äú${risk}‚ÄùÔºåÊäïËµÑÊúüÈôê‰∏∫‚Äú${horizon}‚ÄùÔºåËØ∑Êèê‰æõ‰∏ÄÊÆµÁÆÄÁü≠ÁöÑËØ¥ÊòéÊÄßÊÆµËêΩÔºàÁ∫¶3-5Âè•ËØùÔºâÔºåËØ¥ÊòéËøôÊ†∑ÁöÑ‰∏™‰∫∫ÈÄöÂ∏∏‰ºöÂ¶Ç‰ΩïÂ§ÑÁêÜ‰ª•‰∏ãÊäïËµÑÁ≠ñÁï•Ê≠•È™§Ôºö
                1. Â∫îÊÄ•Âü∫Èáë, 2. ÁÆ°ÁêÜÈ´òÊÅØÂÄ∫Âä°, 3. ‰ΩéÈ£éÈô©ÈÄâÈ°π, 4. ‰∏≠/È´òÈ£éÈô©ÈÄâÈ°π, 5. ÊåÅÁª≠Â§öÂÖÉÂåñ‰∏éÂ≠¶‰π†„ÄÇ
                ÁÑ∂ÂêéÔºåÂè¶Ëµ∑‰∏ÄÊÆµÔºåÁÆÄË¶ÅËØ¥Êòé‰∏éÊâÄÈÄâÈ£éÈô©ÂÅèÂ•ΩÔºà${risk}ÔºâÁõ∏ÂÖ≥ÁöÑÂÖ∏ÂûãÊäïËµÑÁ±ªÂûãÔºà‰æãÂ¶ÇÔºå‰ΩéÈ£éÈô©ÂØπÂ∫îMMFs/ÂÄ∫Âà∏ÔºåÈ´òÈ£éÈô©ÂØπÂ∫îËÇ°Á•®ÔºâÁöÑ‰∏ÄËà¨È£éÈô©ËÄÉËôëÔºà1-2Âè•ËØùÔºâ„ÄÇ
                ‰ª•ËøôÊ†∑ÁöÑÁü≠ËØ≠ÂºÄÂ§¥Ôºö‚ÄúÂØπ‰∫éÈ£éÈô©ÊâøÂèóËÉΩÂäõ‰∏∫[${risk}]‰∏îÊäïËµÑÊúüÈôê‰∏∫[${horizon}]ÁöÑ‰∫∫Êù•ËØ¥Ôºö‚Äù„ÄÇ
                Ëøô‰ªÖÁî®‰∫éÊïôËÇ≤ÁõÆÁöÑÔºåÂπ∂ÈùûË¥¢Âä°Âª∫ËÆÆ„ÄÇ‰∏çË¶ÅÁªôÂá∫ÂÖ∑‰ΩìÁöÑÊäïËµÑÂª∫ËÆÆ„ÄÇ
                ‰øùÊåÅ‰ø°ÊÅØ‰∏∞ÂØåÂíåË∞®ÊÖéÁöÑËØ≠Ê∞î„ÄÇËØ∑Áî®ÁÆÄ‰Ωì‰∏≠ÊñáÂõûÁ≠î„ÄÇ` :
                `You are a helpful assistant providing illustrative financial education.
                Based on a user with a general risk tolerance of '${risk}' and an investment horizon of '${horizon}', provide a brief, illustrative paragraph (around 3-5 sentences) on how such an individual might generally approach the following investment strategy steps:
                1. Emergency Fund, 2. Manage High-Interest Debt, 3. Low-Risk Options, 4. Medium/Higher-Risk options, 5. Ongoing Diversification & Learning.
                Then, in a separate paragraph, briefly explain general risk considerations (1-2 sentences) for typical investment types associated with their chosen risk tolerance ('${risk}') (e.g., low risk implies MMFs/bonds, high risk implies stocks).
                Start the first paragraph with a phrase like: "For someone with a ${risk} risk tolerance and a ${horizon} horizon:".
                This is for educational purposes ONLY and is NOT financial advice. Do not give specific investment recommendations.
                Keep the tone informative and cautious. Please respond in English.`;

                const resultText = await callGeminiAPI(prompt);
                geminiPointersResultDiv.innerHTML = resultText.replace(/\n\n/g, '<br><br>').replace(/\n/g, '<br>');
                generatePointersButton.disabled = false;
            });
        }
        
        async function getAIEconomicOutlook() {
            const lang = translations[currentLanguage];
            geminiOutlookResultDiv.innerHTML = `<div class="loading-spinner"></div> <p class="text-center">${lang.generatingOutlookText || 'Generating outlook summary...'}</p>`;
            const generateOutlookButton = document.getElementById('generateOutlookButton');
            if(generateOutlookButton) generateOutlookButton.disabled = true;

            const promptContext = currentLanguage === 'zh' ?
            `Ê†πÊçÆ‰ª•‰∏ã‰∏≠ÂõΩÁªèÊµé‰∏ªÈ¢òÔºöÂÆ∂Â∫≠ÂéªÊù†ÊùÜÂåñ„ÄÅË∞®ÊÖéÊ∂àË¥π„ÄÅÈÄöË¥ßÁ¥ßÁº©ÂéãÂäõ„ÄÅÊîøÂ∫úÈÄöËøáÂü∫Á°ÄËÆæÊñΩÊîØÂá∫ÂíåË¥¢ÊîøÁ∫™ÂæãÂèåÈáçÁ≠ñÁï•ËøõË°åÂà∫ÊøÄ„ÄÅ‰ª•ÂèäÂä≥Âä®ÂäõÂ∏ÇÂú∫ÊåëÊàòÔºå‰∏∫‰∏≠ÂõΩÂÆ∂Â∫≠ÁîüÊàê‰∏Ä‰∏™ÂÖ≥‰∫éÂΩìÂâçÁªèÊµéÂâçÊôØÁöÑÁÆÄÊòéÊëòË¶ÅÔºà3-4Âè•ËØùÔºâ„ÄÇÈáçÁÇπÂÖ≥Ê≥®ÂØπÂÆ∂Â∫≠Ë¥¢Âä°ÂÜ≥Á≠ñÁöÑÊΩúÂú®ÂΩ±Âìç„ÄÇËØ∑Áî®ÁÆÄ‰Ωì‰∏≠ÊñáÂõûÁ≠î„ÄÇ` :
            `Based on the following themes for the Chinese economy: household deleveraging, cautious spending, deflationary pressures, government stimulus via infrastructure spending and fiscal discipline (dual strategy), and labor market challenges, generate a concise summary (3-4 sentences) of the current economic outlook for Chinese households. Focus on potential implications for household financial decisions. Please respond in English.`;

            const resultText = await callGeminiAPI(promptContext);
            geminiOutlookResultDiv.innerHTML = resultText.replace(/\n/g, '<br>');
            if(generateOutlookButton) generateOutlookButton.disabled = false;
        }


        async function showTermExplanation(termKey) {
            const lang = translations[currentLanguage];
            const termToExplain = currentLanguage === 'zh' ? 
                (termKey === 'M2-M1 Scissors Gap' ? 'M2-M1Ââ™ÂàÄÂ∑Æ' : 'CPI‰∏éÈÄöÁº©ÂéãÂäõ') : termKey;

            modalTitleEl.textContent = `${lang.modalTitleText || 'Term Explanation'}: ${termToExplain}`;
            modalBody.innerHTML = ''; 
            modalLoading.innerHTML = `<div class="loading-spinner"></div> <p class="text-center">${lang.modalLoadingText || 'Loading explanation...'}</p>`;
            modalLoading.style.display = 'block';
            termModal.style.display = 'block';

            const prompt = currentLanguage === 'zh' ?
            `ËØ∑Áî®ÁÆÄÂçïÊòìÊáÇÁöÑËØ≠Ë®ÄÔºà2-4Âè•ËØùÔºâ‰∏∫ÊôÆÈÄöÂ§ß‰ºóËß£ÈáäÁªèÊµéÊúØËØ≠‚Äú${termToExplain}‚Äù„ÄÇÂêåÊó∂ÔºåÁÆÄË¶ÅÊèêÂèäÂÆÉÈÄöÂ∏∏ÁöÑÂê´‰πâÊàñÂÆÉÈÄöÂ∏∏Ë°®ÊòéÁªèÊµéÁä∂ÂÜµÂ¶Ç‰Ωï„ÄÇËØ∑Áî®ÁÆÄ‰Ωì‰∏≠ÊñáÂõûÁ≠î„ÄÇ` :
            `Explain the economic term "${termToExplain}" in simple, easy-to-understand language for a general audience (2-4 sentences). Also, briefly mention its typical implications or what it generally indicates about an economy. Please respond in English.`;
            
            const explanation = await callGeminiAPI(prompt);
            modalBody.innerHTML = explanation.replace(/\n/g, '<br>');
            modalLoading.style.display = 'none';
        }

        function closeModal() {
            termModal.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == termModal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
